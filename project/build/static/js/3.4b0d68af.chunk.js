(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[3],{51:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return p}));var a=c(5),s=c(29),n=c(2),r=c(16),i=c(27),l=(c(33),c(4)),o=c(8),j=c(3),u=c(15),b=c(0);function d(e){var t=e.item,c=e.onCountChange,s=Object(l.c)(o.c),n=Object(l.b)(),r=function(){n(Object(j.l)(t)),n(Object(j.i)(!0)),document.addEventListener("keydown",(function(e){return Object(u.a)(e,(function(){return n(Object(j.i)(!1))}))}))};return Object(b.jsxs)("li",{className:"cart-list__item",children:[Object(b.jsx)("button",{className:"cart-list__item-delete",type:"button","aria-label":"Close",onClick:r}),Object(b.jsxs)("picture",{children:[Object(b.jsx)("source",{type:"image/webp",srcSet:"".concat(t.img,".webp")}),Object(b.jsx)("img",{className:"cart-list__image",src:"".concat(t.img,".png"),alt:"\u0413\u0438\u0442\u0430\u0440\u0430",width:"48",height:"124"})]}),Object(b.jsxs)("div",{className:"cart-list__group",children:[Object(b.jsxs)("h3",{className:"cart-list__item-name",children:[t.type.toUpperCase()," ",t.name.toUpperCase()]}),Object(b.jsxs)("span",{className:"cart-list__item-code",children:["\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",t.code]}),Object(b.jsxs)("span",{className:"cart-list__item-description",children:[t.type[0].toUpperCase()+t.type.slice(1),", ",t.stringNumber," \u0441\u0442\u0440\u0443\u043d\u043d\u0430\u044f"]})]}),Object(b.jsxs)("span",{className:"cart-list__item-price",children:[t.price.toLocaleString()," \u20bd"]}),Object(b.jsxs)("ul",{className:"cart-list__controls",children:[Object(b.jsx)("li",{className:"cart-list__control",children:Object(b.jsx)("button",{className:"cart-list__control-button",onClick:function(){if(t.count>1){var e=s.findIndex((function(e){return e.code===t.code}));n(Object(j.f)([].concat(Object(a.a)(s.slice(0,e)),[Object.assign({},t,{count:s[e].count-1})],Object(a.a)(s.slice(e+1))))),c(s.reduce((function(t,c,a){return t+(a===e?c.count-1:c.count)*c.price}),0))}else r()},children:"-"})}),Object(b.jsx)("li",{className:"cart-list__control",children:Object(b.jsx)("button",{className:"cart-list__control-button",children:t.count})}),Object(b.jsx)("li",{className:"cart-list__control",children:Object(b.jsx)("button",{className:"cart-list__control-button",onClick:function(){var e=s.findIndex((function(e){return e.code===t.code}));n(Object(j.f)([].concat(Object(a.a)(s.slice(0,e)),[Object.assign({},t,{count:s[e].count+1})],Object(a.a)(s.slice(e+1))))),c(s.reduce((function(t,c,a){return t+(a===e?c.count+1:c.count)*c.price}),0))},children:"+"})})]}),Object(b.jsxs)("span",{className:"cart-list__total",children:[(t.price*t.count).toLocaleString()," \u20bd"]})]})}var m=c(28),h=c(34),O=c(1),_=c(21);function p(){var e=Object(l.c)(o.c),t=Object(n.useState)(""),c=Object(s.a)(t,2),j=c[0],u=c[1],p=Object(n.useState)(e.reduce((function(e,t){return e+t.count*t.price}),0)),x=Object(s.a)(p,2),g=x[0],N=x[1],f=Object(n.useState)([]),A=Object(s.a)(f,2),R=A[0],T=A[1],I=Object(l.c)(_.a),S=Object(n.useRef)();console.log(e);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(i.a,{page:O.a.CART}),Object(b.jsx)("main",{className:"page-main",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"visually-hidden",children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d Guitar Shop"}),Object(b.jsx)("h2",{className:"page-title page-title--cart",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(b.jsxs)("ul",{className:"page-path",children:[Object(b.jsx)("li",{className:"page-path__item",children:Object(b.jsx)("a",{className:"page-path__link",href:"#",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(b.jsx)("li",{className:"page-path__item",children:Object(b.jsx)(r.b,{className:"page-path__link",to:"/",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})}),Object(b.jsx)("li",{className:"page-path__item",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c"})]}),Object(b.jsx)("ul",{className:"cart-list",children:e.map((function(e){return Object(b.jsx)(d,{item:e,onCountChange:function(e){return N(e)}},e.code)}))}),Object(b.jsxs)("div",{className:"cart-ordering",children:[Object(b.jsxs)("div",{className:"cart-ordering__promocode",children:[Object(b.jsx)("h4",{className:"cart-ordering__title",children:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u043d\u0430 \u0441\u043a\u0438\u0434\u043a\u0443"}),Object(b.jsx)("p",{className:"cart-ordering__text",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434, \u0435\u0441\u043b\u0438 \u043e\u043d \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c."}),Object(b.jsxs)("form",{className:"cart-ordering__form",method:"post",action:"https://echo.htmlacademy.ru/",name:"promocode-form",onSubmit:function(t){if(t.preventDefault(),e.length>0)switch(console.log(j),j){case O.h.GITARAHIT.name:R.includes(O.h.GITARAHIT.name)||(N(g*((100-O.h.GITARAHIT.SALE_PERCENT)/100)),T([].concat(Object(a.a)(R),[O.h.GITARAHIT.name])));break;case O.h.SUPERGITARA.name:R.includes(O.h.SUPERGITARA.name)||(N(g-O.h.SUPERGITARA.SALE_SUM),T([].concat(Object(a.a)(R),[O.h.SUPERGITARA.name])));break;case O.h.GITARA2020.name:O.h.GITARA2020.SALE_SUM/g*100<O.h.GITARA2020.SALE_PERCENT_LIMIT&&!R.includes(O.h.GITARA2020.name)&&(N(g-O.h.GITARA2020.SALE_SUM),T([].concat(Object(a.a)(R),[O.h.GITARA2020.name])));break;default:N(g)}u("")},children:[Object(b.jsx)("label",{className:"cart-ordering__form-label visually-hidden",htmlFor:"promocode",children:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434"}),Object(b.jsx)("input",{className:"cart-ordering__form-input",type:"text",id:"promocode",value:j,onChange:function(t){u(t.target.value),t.target.value in O.h?(e.length>0?S.current.setCustomValidity(""):S.current.setCustomValidity("\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"),R.includes(t.target.value)&&S.current.setCustomValidity("\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u0443\u0436\u0435 \u0431\u044b\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d")):S.current.setCustomValidity("\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u043d\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d")},ref:S}),Object(b.jsx)("button",{className:"cart-ordering__form-submit",type:"submit",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0443\u043f\u043e\u043d"})]})]}),Object(b.jsxs)("div",{className:"cart-ordering__checkout",children:[Object(b.jsxs)("span",{className:"cart-ordering__total",children:["\u0412\u0441\u0435\u0433\u043e: ",g.toLocaleString()," \u20bd"]}),Object(b.jsx)("button",{className:"cart-ordering__order-submit",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})]})}),Object(b.jsx)(m.a,{page:O.a.CART}),I&&Object(b.jsx)(h.a,{})]})}}}]);
//# sourceMappingURL=3.4b0d68af.chunk.js.map